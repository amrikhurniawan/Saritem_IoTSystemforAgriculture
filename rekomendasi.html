<!--
=========================================================
* * Black Dashboard - v1.0.1
=========================================================

* Product Page: https://www.creative-tim.com/product/black-dashboard
* Copyright 2019 Creative Tim (https://www.creative-tim.com)


* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">

  <title>
    Smart Rain System | Rekomendasi Tanaman
  </title>
  <!--     Fonts and icons     -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <script src="https://kit.fontawesome.com/ca4cf53ec2.js"></script>
   <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <script src="https://kit.fontawesome.com/ca4cf53ec2.js"></script>

  <!-- Nucleo Icons -->
  <link href="nucleo-icons.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link href="black-dashboard.css?v=1.0.0" rel="stylesheet" />
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="demo.css" rel="stylesheet" />
</head>

<body class="">
  <div class="wrapper">
    <div class="sidebar" data="green">
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="blue | green | orange | red"
    -->
      <div class="sidebar-wrapper">
        <div class="logo">
          <a href="javascript:void(0)" class="simple-text logo-mini">
            <i class="fas fa-cloud-rain"></i>
          </a>
          <a href="javascript:void(0)" class="simple-text logo-normal">
            Smart Rain System
          </a>
        </div>
        <ul class="nav">
          <li class="active ">
            <a href="./setelahlogin1.html">
            <i class="fas fa-tachometer-alt"></i>
              <p>Lokasi</p>
            </a>
          </li>
          <li>
            <a href="./rekomendasi.html">
              <i class="fas fa-seedling"></i>
              <p>Rekomendasi</p>
            </a>
          </li>
          <li>
            <a href="./history.html">
             <i class="fas fa-calendar-alt"></i>
              <p>History</p>
            </a>
          </li>
          <li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-absolute navbar-transparent">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle d-inline">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <a class="navbar-brand" href="setelahlogin1">Rekomendasi Tanaman</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="navbar-nav ml-auto">
            
              <a href="setelahlogin1" id="logout"> <i class="fas fa-sign-out-alt"></i>Keluar</a> 
              <li class="separator d-lg-none"></li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
      <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/5.10.0/firebase-database.js"></script>
             <script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-auth.js"></script>
            <style type="text/css">
              .text1{
        font-size: 110px;
      }
      .text2{
        font-size:55px;
      }
      .text3{
        font-size:40px;
      }

            </style>
            
 <script>
  // Your web app's Firebase configuration
  var Config = {
  apiKey: "AIzaSyCz-puOUyzg0gkVlgb_eRNLMJQMNd75tBA",
  authDomain: "hujan-384e4.firebaseapp.com",
  databaseURL: "https://hujan-384e4.firebaseio.com",
  projectId: "hujan-384e4",
  storageBucket: "hujan-384e4.appspot.com",
  messagingSenderId: "343494290614"

  };
  // Initialize Firebase
  firebase.initializeApp(Config);
  const auth = firebase.auth();
</script>
      <div class="content">
        <div class="row">
          <div class="col-12">
            <div class="card card-chart">
              <div class="card-header ">
                <div class="row">
                  <div class="col-sm-6 text-left">
                    <h5 class="card-category"> Lokasi Hujan</h5>
                    <h2 class="card-title"> <i class="fas fa-map-marked-alt"></i> Lokasi</h2>
                  </div>
                </div>
              </div>
              <div class="card-body">
                <div class="chart-area">
                  
                  <div id="lokasi" style="width:100%;height:400px;"></div>
<script type="text/javascript">

   var map_main;
var map_infoWindow;

var map_centerLat = -6.971851
var map_centerLng = 107.628879
var map_initZoom = 20

var map_windows = []
var dispInfo

function map_initMapMain () {
  dispInfo = {}
  firebase.database().ref('maps/lokasi').on('value', function(snapshot){
    data = snapshot.val()
    for(key in data){
      let status = data[key].status
      if (status == '0') {
          var pin_status = 'sunny.png'
      }else {
          var pin_status = 'rainy1.png'
      }
      dispInfo[key] = {
        lat: data[key].latitude,
        lng: data[key].longitude,
        status: pin_status
      }
    }
    displayMap(dispInfo)
  })
}

function displayMap (map_markers){
  var pins = []
  for (key in map_markers) {
    if (!map_markers.hasOwnProperty (key)) continue
    markerData = map_markers [key]
    console.log(markerData.status);
    var pin = new google.maps.Marker ({
      position: {
        lat: markerData.lat,
        lng: markerData.lng
      },
      visible: true,
      icon: markerData.status
    })
    pin.setMap (map_main)
    pins.push (pin)}
    /* listen to marker click */
    var infoWindow = new google.maps.InfoWindow ()
   // google.maps.event.addListener (pin, 'click', (function (pin, data, infoWindow) {
     // return function () {
       // map_closeWindows ()
        //var contentString = '<div><div style="padding-bottom: 10px; font-size: 140%"><b>' +
         // data.label + '</b></div>' +
         // data.desc + '&nbsp;' +
          //'<br><a href="' + data.url + '">View.</a></div>'
        //infoWindow.setContent (contentString)
       // infoWindow.open (map_main, pin)
       // map_windows [0] = infoWindow
      //}})(pin, markerData, infoWindow))
 // }

  map_main = new google.maps.Map (document.getElementById('lokasi'), {
    center: {
      lat: map_centerLat,
      lng: map_centerLng
    },
    zoom: map_initZoom
  });

  var markerCluster = new MarkerClusterer (map_main, pins)
  infoWindow.open(map_main);
}


function map_closeWindows () {
  if (map_windows.length > 0) {
    map_windows [0].set ('marker', null)
    map_windows [0].close ()
    map_windows.length = 0
  }
}

</script>

                </div>
              </div>
            </div>
          </div>
        </div>
         <script type="text/javascript">
  var FireBase6 = firebase.database().ref();
  var suhu; var tanah; var udara;
  FireBase6.on("value" ,function(datasnapshot){
  suhu =parseFloat(datasnapshot.child("Perangkat1/suhu").val()); 
  tanah =parseFloat(datasnapshot.child("Perangkat1/kelembapantanah").val()); 
  udara =parseFloat(datasnapshot.child("Perangkat1/kelembapanudara").val()); 
document.getElementById("Suhu1").innerText =suhu; 
document.getElementById("Tanah1").innerText =tanah; 
document.getElementById("Udara1").innerText =udara; 
  });
  </script>
        <div class="row">
          <div class="col-lg-4">
            <div class="card card-chart">
              <div class="card-header">
                <h4 class="card-title"> <i class="fas fa-2x fa-temperature-high"></i>Suhu Udara</h4>
              </div>
              <div class="card-body">
                <div class="chart-area">
                   <p class="text1" id="Suhu1" align="center"></p>
                   <p class="text2" align="right"><sup>o</sup>C</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="card card-chart">
              <div class="card-header">
                <h4 class="card-title"> <i class="fas fa-2x fa-tint"></i>Kelembapan Udara</h4>
             
              </div>
              <div class="card-body">
                <div class="chart-area">
                  <p class="text1" id="Udara1" align="center"></p>
                  <p class="text2" align="right">%</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="card card-chart">
              <div class="card-header">
                <h4 class="card-title"> <i class="fas fa-2x fa-tree"></i>Kelembapan Tanah</h4>
              </div>
              <div class="card-body">
                <div class="chart-area">
                 <p class="text1" id="Tanah1" align="center"></p>
                 <p class="text2" align="right">%</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <script type="text/javascript">
      function hitungLuas(){
        panjang = document.getElementById("txtPanjang").value;
        lebar = document.getElementById("txtLebar").value;
        if (panjang == ""){
          alert("Panjang Harus diisi !");
          return;
        }else if (lebar == ""){
          alert("Lebar Harus diisi !");
          return;
        }
        if (isNaN(panjang)){
          alert("Panjang Harus diisi dengan angka !");
          return;
        }if (isNaN(lebar)){
          alert("Lebar Harus diisi dengan angka !");
          return;
        }
        Luas = panjang * lebar;
        document.getElementById("txtLuas").value =  Luas;
        console.log(Luas);
var FireBase5 = firebase.database().ref();
     var total11; var hasil1; var meter_dm = 1000; var lupe = Luas; var koma1; var vk; var koma2; var koma3; var kurang_a;
        
  FireBase5.on("value" ,function(datasnapshot){
  id1 =parseFloat(datasnapshot.child("Perangkat1/id_menit").val()); 
  kurang_a = parseFloat(id1 - 1);
  console.log(kurang_a);
   total11 = parseFloat(datasnapshot.child('Perangkat1/hujan/' + kurang_a + '/total').val());
    hasil1 = parseFloat(total11 / meter_dm);
    koma1 = hasil1.toFixed(5);    
    vk = parseFloat(lupe * koma1);
    koma2 = vk.toFixed(5);
    liter = parseFloat(koma2 * meter_dm); 
  koma3 =  liter.toFixed(2);
   document.getElementById("Totalhujan4").innerText =liter; 
  });
      }
      
      function resetForm(){
        document.getElementById("txtPanjang").value="";
        document.getElementById("txtLebar").value="";
        document.getElementById("txtLuas").value="";
      }

    </script>
        <div class="row">
          <div class="col-lg-6 col-md-12">
            <div class="card card-tasks">
              <div class="card-header">
                <i class="fas fa-ruler-combined"></i> <h4 class="title d-inline">Luas Permukaan</h4>
              </div>
              <div class="card-body">
                 <h3 for="panjang">Panjang ( Meter )</h3><input type="text" id="txtPanjang" name="txtPanjang"/>
    <h3>Lebar ( Meter )</h3><input type="text" id="txtLebar" name="txtLebar"/><br>
    <input type="button" id="btnHitung" value="Hitung Luas" onclick="hitungLuas();">&nbsp;<input type="button" id="btnReset" value="Reset" onclick="resetForm();"><br>
<h3>Luas ( m<sup>2</sup> )</h3><input type="text" readonly="true" id="txtLuas" name="txtLuas"/>
              </div>
            </div>
          </div>
          <div class="col-lg-6 col-md-12">
            <div class="card ">
              <div class="card-header">
                 <i class="fas fa-cloud-rain"></i> <h4 class="title d-inline">Jumlah Air Hujan Yang Turun</h4>
              </div>
              <div class="card-body"><br><br><br>
                 <p class="text2" align="center" line-height="200px" id="Totalhujan4"></p><br><br><br>
                 <p class="text3" align="right">Liter Air Hujan</p>
          </div>
        </div>
      </div>
      <footer class="footer">
            <script>
              document.write(new Date().getFullYear())
            </script>2018 made with <i class="tim-icons icon-heart-2"></i> by
            <a href="javascript:void(0)" target="_blank">Creative Tim</a> for a better web.
          </div>
        </div>
      </footer>
    </div>
  </div>
 
  <!--   Core JS Files   -->
  <script src="jquery.min.js"></script>
  <script src="popper.min.js"></script>
  <script src="bootstrap.min.js"></script>
  <script src="perfect-scrollbar.jquery.min.js"></script>
  <!--  Google Maps Plugin    -->
  <!-- Place this tag in your head or just before your close body tag. -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
  <!-- Chart JS -->
  <script src="chartjs.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="bootstrap-notify.js"></script>
  <!-- Control Center for Black Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="black-dashboard.min.js?v=1.0.0"></script><!-- Black Dashboard DEMO methods, don't include it in your project! -->
  <script src="demo.js"></script>
  <script src="logout.js"></script>
  
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD0LW0kxXNcV09_FQqabAKa0izzWW7-6ZQ&callback=map_initMapMain"></script>
  <script src="https://cdn.trackjs.com/agent/v3/latest/t.js"></script>
  <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>
</body>

</html>